{% extends "fellowms/base.html" %}

{% block content %}
{% if user.is_superuser %}
<h1>Software Sustainability Institute Fellowship Program - Admin</h1>
{% else %}
<h1>Software Sustainability Institute Fellowship Program</h1>
{% endif %}
<p>If you need us to process something please use one of the links bellow:</p>
<ul>
    {% if user.is_superuser %}
    <li><a href="{% url 'fellow' %}">Create fellow profile</a></li>
    {% endif %}
    <li><a href="{% url 'event' %}">Request event support</a></li>
    <li><a href="{% url 'blog' %}">Request process of blog post</a></li>
    <li><a href="{% url 'expense' %}">Claim reimbursement for expense</a></li>
</ul>
{% if user.is_superuser %}
<p>You can edit the information on the database <a href="{% url 'admin:index' %}">here</a>.</p>
{% else %}
<p>If you didn't find what you are looking for please email us at <a href="">admin</a>.</p>
{% endif %}
{% if user.is_authenticated %}
{% if user.is_superuser %}
<p>Your pending tasks are:</p>
<h2>
  Events
  <a class="btn btn-default" href="{% url 'blog' %}">New event</a>
</h2>
{% if events %}
<table class="table table-bordered">
  <tbody>
    <tr>
      <th>
        Date
      </th>
      <th>
        Name
      </th>
      <th>
        Status
      </th>
    </tr>
    {% for event in events %}
    <tr>
      <td>{{ event.added }}</td>
      <td>
        <a href="{% url 'event_detail' event.id %}">{{ event.name }}</a>
        from <a href="{% url 'fellow_detail' event.fellow.id %}">{{ event.fellow.forenames }} {{ event.fellow.surname }}</a>
      </td>
      <td>
        {{ event.get_status_display }}
        <a href="{% url 'event_review' event.id %}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
<h2>
  Expenses
 <a class="btn btn-default" href="{% url 'expense' %}">New expense</a>
</h2>
{% if expenses %}
<table class="table table-bordered">
  <tbody>
    <tr>
      <th>
        Date
      </th>
      <th>
        Name
      </th>
      <th>
        Status
      </th>
    </tr>
    {% for expense in expenses %}
    <tr>
      <td>{{ expense.added }}</td>
      <td>
        <a href="/upload/{{ expense.claim }}">{{ expense.claim }}</a>
        from <a href="{% url 'fellow_detail' expense.event.fellow.id %}">{{ expense.event.fellow.forenames }} {{ expense.event.fellow.surname }}</a>
        for <a href="{% url 'event_detail' expense.event.id %}">{{ expense.event.name }}</a>
      </td>
      <td>
        {{ expense.get_status_display }}
        <a href="{% url 'expense_review' expense.id %}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
<h2>
  Blogs
  <a class="btn btn-default" href="{% url 'blog' %}">New blog</a>
</h2>
{% if blogs %}
<table class="table table-bordered">
  <tbody>
    <tr>
      <th>
        Date
      </th>
      <th>
        Name
      </th>
      <th>
        Status
      </th>
    </tr>
    {% for blog in blogs %}
    <tr>
      <td>{{ blog.added }}</td>
      <td>
        <a href="{{ blog.draft_url }}">{{ blog.draft_url }}</a> from
        <a href="{% url 'event_detail' blog.event.id %}">{{ blog.event.name }}</a>
      </td>
      <td>
        {{ blog.get_status_display }}
        <a href="{% url 'blog_review' blog.id %}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% else %}
{% include 'fellowms/finances.html' %}
<h2>Events</h2>
<p><a href="{% url 'event' %}?fellow_id={{ fellow.id }}">Request new event.</a></p>
<table class="table table-bordered">
  <tbody>
    <tr>
      <th>
        Event
      </th>
      <th>
        Status
      </th>
    </tr>
    {% for event in events %}
    <tr
       {% if event.status in 'U' %}
       class="danger"
       {% elif event.status in 'P' %}
       class="warning"
       {% elif event.status in 'AR' %}
       class="sucess"
       {% endif %}
       >
      <td>
        <a href="{% url 'event_detail' event.id %}">{{ event.name }}</a>
      </td>
      <td>
        {{ event.get_status_display }}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endif %}
{% endblock %}
